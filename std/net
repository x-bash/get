@src std/job

net.is_ping_available(){
    ping -c 2 ${1:?ip} 1>/dev/null 2>&1
}

net.mping(){
    for ip in "$@"; do
        job.put ${MAX-:100} "ping.is_ping_available $ip && echo $ip"
    done

    while read -d ' ' ip; do
        job.put ${MAX-:100} "ping.is_ping_available $ip && echo $ip"
    done

    echo "Waiting until all jobs finished" >&2
    job.wait_until_finished
}
